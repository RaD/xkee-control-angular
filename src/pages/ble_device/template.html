<legend class="text-center">BLE устройство</legend>
<div class="container-fluid px-2">
  @if (error) {
    <div class="alert alert-danger">
      <fa-icon [icon]="faBluetooth" class="me-2"></fa-icon>
      {{ error }}
    </div>
  }

  @if (device && !error) {
    <div class="card">
      <div class="card-header">
        <div class="d-flex align-items-center">
          <fa-icon [icon]="faBluetooth" class="me-2 text-primary fs-4"></fa-icon>
          <div>
            <h5 class="card-title mb-0">{{ device.name }}</h5>
            <small class="text-muted">{{ device.id }}</small>
          </div>
        </div>
      </div>
      <div class="card-body">
        @if (loading) {
          <div class="text-center">
            <div class="spinner-border text-primary">
              <span class="visually-hidden">Загрузка свойств...</span>
            </div>
            <p class="mt-2">Загрузка свойств устройства...</p>
          </div>
        } @else {
          <table class="table table-borderless">
            <tbody>
              @for (property of properties; track property.name) {
                <tr>
                  <td class="fw-bold" style="width: 40%;">
                    <fa-icon [icon]="getPropertyIcon(property.type)" [class]="getPropertyClass(property.type)" class="me-2"></fa-icon>
                    {{ property.name }}
                  </td>
                  <td>
                    @if (property.name === 'Уровень сигнала') {
                      <span [class]="getRssiClass(device!.rssi)">{{ property.value }}</span>
                    } @else if (property.name === 'Статус подключения') {
                      <span class="badge" [class]="device!.connected ? 'bg-success' : 'bg-secondary'">{{ property.value }}</span>
                    } @else {
                      {{ property.value }}
                    }
                  </td>
                </tr>
              }
            </tbody>
          </table>
        }
      </div>
    </div>
  }
</div>

<!-- Buttons -->
<div class="d-none d-md-block">
  <div class="row mb-3">
    <div class="col-md-12">
      <div class="d-grid" style="min-width: 120px;">
        <app-smart-button kind="secondary" [icon]="faArrowLeft" text="Назад" (click)="navigateToBLE()">
        </app-smart-button>
      </div>
    </div>
  </div>
</div>

<div class="d-md-none fixed-bottom">
  <div class="container-fluid">
    <div class="d-grid">
      <app-smart-button kind="secondary" [icon]="faArrowLeft" text="Назад" (click)="navigateToBLE()">
      </app-smart-button>
    </div>
  </div>
</div>